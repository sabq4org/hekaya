# **حكاية AI - نظام إدارة المحتوى الذكي**

![Hekaya AI](https://user-images.githubusercontent.com/1234567/123456789-abcdef.png)

**حكاية AI** هو نظام إدارة محتوى (CMS) متكامل ومتقدم، مبني باستخدام أحدث التقنيات مثل Next.js, TypeScript, Prisma, و PostgreSQL. يوفر النظام لوحة تحكم شاملة لإدارة جميع جوانب الموقع، من المقالات والتعليقات إلى المستخدمين والنشرات البريدية، مع التركيز على الأداء، الأمان، وتجربة المستخدم.

---

## ✨ **الميزات الرئيسية**

### 🚀 **لوحة تحكم متقدمة**
- **نظرة عامة شاملة**: إحصائيات فورية لأهم مؤشرات الموقع.
- **إدارة المحتوى**: CRUD كامل للمقالات، الأقسام، والوسوم.
- **إدارة التعليقات**: نظام مراجعة، مكافحة سبام، ردود، وتثبيت.
- **إدارة المستخدمين**: أدوار وصلاحيات، تفعيل، وإحصائيات.
- **النشرة البريدية**: إدارة المشتركين، حملات، وتتبع التسليم.
- **التحليلات**: تقارير مفصلة عن أداء المحتوى ونمو المستخدمين.
- **الأتمتة**: مهام مجدولة لتنظيف البيانات، النشر، والنسخ الاحتياطي.
- **الإعدادات**: نظام مرن لتخصيص جميع جوانب الموقع.

### ✍️ **محرر محتوى احترافي**
- **مبني على Tiptap/Editor.js**: تجربة تحرير حديثة وسلسة.
- **دعم الوسائط**: صور، فيديو، تضمين من منصات التواصل.
- **عناصر متقدمة**: جداول، اقتباسات، Callouts، كود مع نسخ.
- **قوالب جاهزة**: إنشاء مقالات بسرعة باستخدام قوالب معدة مسبقاً.
- **مكتبة وسائط**: إدارة جميع ملفات الوسائط في مكان واحد.

### 📈 **SEO وأداء فائق**
- **تحسين تلقائي**: Sitemap, RSS, OG Tags, Structured Data.
- **صور OG مولدة**: صور مخصصة للمشاركة على وسائل التواصل.
- **فهرس محتوى تلقائي**: تحسين تجربة القراءة و SEO.
- **أداء Lighthouse فوق 95**: سرعة تحميل فائقة وتجربة مستخدم ممتازة.

### 🛡️ **أمان وصلاحيات**
- **نظام RBAC**: أدوار وصلاحيات مفصلة (مدير، محرر، كاتب، قارئ).
- **سجل تدقيق شامل**: تتبع جميع العمليات التي تتم في النظام.
- **حماية متقدمة**: تشفير كلمات المرور، حماية من CSRF/XSS.
- **مصادقة آمنة**: باستخدام NextAuth مع دعم OAuth.

---

## 🛠️ **التقنيات المستخدمة**

- **Frontend**: Next.js, React, TypeScript, Tailwind CSS, Shadcn/UI
- **Backend**: Next.js API Routes, TypeScript
- **Database**: PostgreSQL, Prisma ORM
- **Authentication**: NextAuth.js
- **Editor**: Tiptap
- **Deployment**: Vercel, Docker

---

## 🚀 **كيفية التشغيل**

### 1. **المتطلبات الأساسية**
- Node.js v18+
- npm or yarn
- PostgreSQL
- Git

### 2. **تثبيت المشروع**
```bash
# استنساخ المستودع
git clone https://github.com/sabq4org/hekaya.git
cd hekaya

# تثبيت الاعتماديات
npm install
```

### 3. **إعداد قاعدة البيانات**
- قم بإنشاء قاعدة بيانات PostgreSQL جديدة.
- انسخ ملف `.env.example` إلى `.env.local`.
- قم بتحديث متغير `DATABASE_URL` في ملف `.env.local`.

### 4. **تطبيق نموذج قاعدة البيانات**
```bash
# تطبيق نموذج قاعدة البيانات
npx prisma db push

# تشغيل البيانات الأولية
npx prisma db seed
```

### 5. **تشغيل المشروع**
```bash
# تشغيل خادم التطوير
npm run dev
```
- افتح [http://localhost:3000](http://localhost:3000) في متصفحك.

### 6. **بيانات تسجيل الدخول**
- **المدير**: `admin@hekaya-ai.com` / `admin123`
- **المحرر**: `editor@hekaya-ai.com` / `editor123`
- **الكاتب**: `author@hekaya-ai.com` / `author123`

---

## 🗄️ **نموذج قاعدة البيانات**

يحتوي النظام على 15 جدولاً مترابطاً لإدارة جميع جوانب الموقع:

- **Core**: `User`, `Post`, `Comment`, `Section`, `Tag`
- **Newsletter**: `NewsletterSubscriber`, `NewsletterCampaign`, `NewsletterDelivery`
- **System**: `Setting`, `AuditLog`, `Automation`, `AutomationExecution`, `Notification`
- **Relations**: `_PostToTag`, `_SectionToUser`

يمكنك استكشاف النموذج بالتفصيل في ملف `prisma/schema.prisma`.

---

## 🔌 **واجهات برمجة التطبيقات (APIs)**

يوفر النظام مجموعة شاملة من APIs لإدارة جميع الموارد. جميع APIs محمية بنظام الصلاحيات وتسجل عملياتها في سجل التدقيق.

- `GET /api/posts`: الحصول على قائمة المقالات مع فلترة وبحث.
- `POST /api/posts`: إنشاء مقال جديد.
- `GET /api/posts/[id]`: الحصول على تفاصيل مقال واحد.
- `PUT /api/posts/[id]`: تحديث مقال.
- `DELETE /api/posts/[id]`: حذف مقال.
- `PATCH /api/posts/bulk`: عمليات جماعية على المقالات.

... (وغيرها الكثير من APIs للأقسام، الوسوم، التعليقات، المستخدمين، إلخ)

---

## 👥 **الأدوار والصلاحيات**

يحتوي النظام على 4 أدوار رئيسية مع صلاحيات مفصلة:

- **ADMIN**: وصول كامل لجميع ميزات النظام.
- **EDITOR**: يمكنه إدارة جميع المحتوى والمستخدمين (باستثناء المدراء).
- **AUTHOR**: يمكنه إنشاء وإدارة مقالاته الخاصة فقط.
- **READER**: يمكنه قراءة المحتوى والتعليق.

يتم تعريف أكثر من 40 صلاحية مفصلة في ملف `src/lib/permissions.ts`.

---

## 🤝 **المساهمة**

نرحب بالمساهمات لتحسين وتطوير **حكاية AI**. يرجى اتباع الخطوات التالية:

1. قم بعمل Fork للمستودع.
2. قم بإنشاء فرع جديد (`git checkout -b feature/AmazingFeature`).
3. قم بتطبيق تغييراتك (`git commit -m 'Add some AmazingFeature'`).
4. قم برفع التغييرات (`git push origin feature/AmazingFeature`).
5. افتح Pull Request.

---

## 📜 **الترخيص**

هذا المشروع مرخص تحت رخصة MIT. انظر ملف `LICENSE` لمزيد من التفاصيل.


